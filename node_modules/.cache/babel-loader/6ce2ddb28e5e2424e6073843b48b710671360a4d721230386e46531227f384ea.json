{"ast":null,"code":"import{useState,useRef}from'react';const useRateLimit=()=>{const[rateLimitError,setRateLimitError]=useState(false);const[apiCallCount,setApiCallCount]=useState(0);const[lastResetTime,setLastResetTime]=useState(Date.now());const rateLimitRef=useRef({calls:0,resetTime:Date.now()});const checkRateLimit=()=>{const now=Date.now();const oneMinute=60*1000;// Reset counter every minute\nif(now-rateLimitRef.current.resetTime>oneMinute){rateLimitRef.current.calls=0;rateLimitRef.current.resetTime=now;setApiCallCount(0);setLastResetTime(now);setRateLimitError(false);}// Check if we're at the limit (9 calls to leave buffer)\nif(rateLimitRef.current.calls>=9){setRateLimitError(true);return false;}return true;};const incrementCallCount=()=>{rateLimitRef.current.calls++;setApiCallCount(rateLimitRef.current.calls);};const resetRateLimit=()=>{rateLimitRef.current.calls=0;rateLimitRef.current.resetTime=Date.now();setApiCallCount(0);setLastResetTime(Date.now());setRateLimitError(false);};return{rateLimitError,apiCallCount,lastResetTime,checkRateLimit,incrementCallCount,resetRateLimit};};export default useRateLimit;","map":{"version":3,"names":["useState","useRef","useRateLimit","rateLimitError","setRateLimitError","apiCallCount","setApiCallCount","lastResetTime","setLastResetTime","Date","now","rateLimitRef","calls","resetTime","checkRateLimit","oneMinute","current","incrementCallCount","resetRateLimit"],"sources":["C:/Users/win10/Documents/GitHub/AliveNPC-Engine/src/hooks/useRateLimit.js"],"sourcesContent":["import { useState, useRef } from 'react';\n\nconst useRateLimit = () => {\n  const [rateLimitError, setRateLimitError] = useState(false);\n  const [apiCallCount, setApiCallCount] = useState(0);\n  const [lastResetTime, setLastResetTime] = useState(Date.now());\n  const rateLimitRef = useRef({ calls: 0, resetTime: Date.now() });\n\n  const checkRateLimit = () => {\n    const now = Date.now();\n    const oneMinute = 60 * 1000;\n    \n    // Reset counter every minute\n    if (now - rateLimitRef.current.resetTime > oneMinute) {\n      rateLimitRef.current.calls = 0;\n      rateLimitRef.current.resetTime = now;\n      setApiCallCount(0);\n      setLastResetTime(now);\n      setRateLimitError(false);\n    }\n    \n    // Check if we're at the limit (9 calls to leave buffer)\n    if (rateLimitRef.current.calls >= 9) {\n      setRateLimitError(true);\n      return false;\n    }\n    \n    return true;\n  };\n\n  const incrementCallCount = () => {\n    rateLimitRef.current.calls++;\n    setApiCallCount(rateLimitRef.current.calls);\n  };\n\n  const resetRateLimit = () => {\n    rateLimitRef.current.calls = 0;\n    rateLimitRef.current.resetTime = Date.now();\n    setApiCallCount(0);\n    setLastResetTime(Date.now());\n    setRateLimitError(false);\n  };\n\n  return {\n    rateLimitError,\n    apiCallCount,\n    lastResetTime,\n    checkRateLimit,\n    incrementCallCount,\n    resetRateLimit\n  };\n};\n\nexport default useRateLimit;"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAExC,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAACC,cAAc,CAAEC,iBAAiB,CAAC,CAAGJ,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACK,YAAY,CAAEC,eAAe,CAAC,CAAGN,QAAQ,CAAC,CAAC,CAAC,CACnD,KAAM,CAACO,aAAa,CAAEC,gBAAgB,CAAC,CAAGR,QAAQ,CAACS,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC,CAC9D,KAAM,CAAAC,YAAY,CAAGV,MAAM,CAAC,CAAEW,KAAK,CAAE,CAAC,CAAEC,SAAS,CAAEJ,IAAI,CAACC,GAAG,CAAC,CAAE,CAAC,CAAC,CAEhE,KAAM,CAAAI,cAAc,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAAJ,GAAG,CAAGD,IAAI,CAACC,GAAG,CAAC,CAAC,CACtB,KAAM,CAAAK,SAAS,CAAG,EAAE,CAAG,IAAI,CAE3B;AACA,GAAIL,GAAG,CAAGC,YAAY,CAACK,OAAO,CAACH,SAAS,CAAGE,SAAS,CAAE,CACpDJ,YAAY,CAACK,OAAO,CAACJ,KAAK,CAAG,CAAC,CAC9BD,YAAY,CAACK,OAAO,CAACH,SAAS,CAAGH,GAAG,CACpCJ,eAAe,CAAC,CAAC,CAAC,CAClBE,gBAAgB,CAACE,GAAG,CAAC,CACrBN,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAEA;AACA,GAAIO,YAAY,CAACK,OAAO,CAACJ,KAAK,EAAI,CAAC,CAAE,CACnCR,iBAAiB,CAAC,IAAI,CAAC,CACvB,MAAO,MAAK,CACd,CAEA,MAAO,KAAI,CACb,CAAC,CAED,KAAM,CAAAa,kBAAkB,CAAGA,CAAA,GAAM,CAC/BN,YAAY,CAACK,OAAO,CAACJ,KAAK,EAAE,CAC5BN,eAAe,CAACK,YAAY,CAACK,OAAO,CAACJ,KAAK,CAAC,CAC7C,CAAC,CAED,KAAM,CAAAM,cAAc,CAAGA,CAAA,GAAM,CAC3BP,YAAY,CAACK,OAAO,CAACJ,KAAK,CAAG,CAAC,CAC9BD,YAAY,CAACK,OAAO,CAACH,SAAS,CAAGJ,IAAI,CAACC,GAAG,CAAC,CAAC,CAC3CJ,eAAe,CAAC,CAAC,CAAC,CAClBE,gBAAgB,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC,CAC5BN,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAC,CAED,MAAO,CACLD,cAAc,CACdE,YAAY,CACZE,aAAa,CACbO,cAAc,CACdG,kBAAkB,CAClBC,cACF,CAAC,CACH,CAAC,CAED,cAAe,CAAAhB,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}