{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback } from 'react';\nconst useWorldEvents = () => {\n  _s();\n  const [worldEvents, setWorldEvents] = useState([]);\n  const [currentEventIndex, setCurrentEventIndex] = useState(0);\n  const [customEvent, setCustomEvent] = useState('');\n  const loadSampleEvents = useCallback(() => {\n    const sampleEvents = [{\n      event_id: 1,\n      title: \"Lord Jon Arryn of House Arryn dies mysteriously\",\n      description: \"The Hand of the King dies suddenly, creating a power vacuum in King's Landing\",\n      political_context: {\n        house_stark: \"Ned Stark of House Stark reluctantly accepts Hand position, honor compels duty to realm\"\n      },\n      cascading_effects: [\"Power vacuum in King's Landing\", \"Stark family travels south\"]\n    }];\n    setWorldEvents(sampleEvents);\n  }, []);\n  const loadWorldQuest = useCallback(async () => {\n    try {\n      const eventsResponse = await fetch('/world_events.json');\n      const eventsData = await eventsResponse.json();\n      setWorldEvents(eventsData.world_events || []);\n      setCurrentEventIndex(0);\n      console.log('World Quest loaded successfully');\n    } catch (error) {\n      console.error('Error loading world events:', error);\n      alert('Failed to load World Quest. Please check if world_events.json exists.');\n    }\n  }, []);\n  const loadDefaultEvents = useCallback(async () => {\n    try {\n      const eventsResponse = await fetch('/world_events.json');\n      const eventsData = await eventsResponse.json();\n      setWorldEvents(eventsData.world_events || []);\n    } catch (error) {\n      console.error('Error loading default events:', error);\n      loadSampleEvents();\n    }\n  }, [loadSampleEvents]);\n  const restartWorld = useCallback(() => {\n    setCurrentEventIndex(0);\n    setWorldEvents([]);\n    loadDefaultEvents();\n    console.log('World restarted - reset to first event and reloaded events');\n  }, [loadDefaultEvents]);\n  const nextEvent = useCallback(() => {\n    setCurrentEventIndex(prev => prev + 1);\n  }, []);\n  const createCustomEvent = useCallback(eventTitle => {\n    return {\n      event_id: 999,\n      title: eventTitle,\n      description: \"Custom event triggered by user\",\n      political_context: {},\n      cascading_effects: []\n    };\n  }, []);\n  const processNextEvent = useCallback(() => {\n    if (currentEventIndex < worldEvents.length) {\n      setCurrentEventIndex(prev => prev + 1);\n    }\n  }, [currentEventIndex, worldEvents.length]);\n  const sendCustomEvent = useCallback((event, immediate = false) => {\n    if (immediate) {\n      // Add custom event as completed above current event\n      const newEvents = [...worldEvents];\n      newEvents.splice(currentEventIndex, 0, {\n        ...event,\n        completed: true\n      });\n      setWorldEvents(newEvents);\n      setCurrentEventIndex(prev => prev + 1);\n    } else {\n      // Add to end of stack\n      setWorldEvents(prev => [...prev, event]);\n    }\n  }, [worldEvents, currentEventIndex]);\n  return {\n    worldEvents,\n    currentEventIndex,\n    customEvent,\n    setCustomEvent,\n    loadWorldQuest,\n    loadDefaultEvents,\n    restartWorld,\n    nextEvent,\n    createCustomEvent,\n    processNextEvent,\n    sendCustomEvent\n  };\n};\n_s(useWorldEvents, \"WbzKvXDCr6dm5DyhK3fSFWqUUzM=\");\nexport default useWorldEvents;","map":{"version":3,"names":["useState","useCallback","useWorldEvents","_s","worldEvents","setWorldEvents","currentEventIndex","setCurrentEventIndex","customEvent","setCustomEvent","loadSampleEvents","sampleEvents","event_id","title","description","political_context","house_stark","cascading_effects","loadWorldQuest","eventsResponse","fetch","eventsData","json","world_events","console","log","error","alert","loadDefaultEvents","restartWorld","nextEvent","prev","createCustomEvent","eventTitle","processNextEvent","length","sendCustomEvent","event","immediate","newEvents","splice","completed"],"sources":["C:/Users/win10/Documents/GitHub/AliveNPC-Engine/src/hooks/useWorldEvents.js"],"sourcesContent":["import { useState, useCallback } from 'react';\n\nconst useWorldEvents = () => {\n  const [worldEvents, setWorldEvents] = useState([]);\n  const [currentEventIndex, setCurrentEventIndex] = useState(0);\n  const [customEvent, setCustomEvent] = useState('');\n\n  const loadSampleEvents = useCallback(() => {\n    const sampleEvents = [\n      {\n        event_id: 1,\n        title: \"Lord Jon Arryn of House Arryn dies mysteriously\",\n        description: \"The Hand of the King dies suddenly, creating a power vacuum in King's Landing\",\n        political_context: {\n          house_stark: \"Ned Stark of House Stark reluctantly accepts Hand position, honor compels duty to realm\"\n        },\n        cascading_effects: [\"Power vacuum in King's Landing\", \"Stark family travels south\"]\n      }\n    ];\n    setWorldEvents(sampleEvents);\n  }, []);\n\n  const loadWorldQuest = useCallback(async () => {\n    try {\n      const eventsResponse = await fetch('/world_events.json');\n      const eventsData = await eventsResponse.json();\n      setWorldEvents(eventsData.world_events || []);\n      setCurrentEventIndex(0);\n      console.log('World Quest loaded successfully');\n    } catch (error) {\n      console.error('Error loading world events:', error);\n      alert('Failed to load World Quest. Please check if world_events.json exists.');\n    }\n  }, []);\n\n  const loadDefaultEvents = useCallback(async () => {\n    try {\n      const eventsResponse = await fetch('/world_events.json');\n      const eventsData = await eventsResponse.json();\n      setWorldEvents(eventsData.world_events || []);\n    } catch (error) {\n      console.error('Error loading default events:', error);\n      loadSampleEvents();\n    }\n  }, [loadSampleEvents]);\n\n  const restartWorld = useCallback(() => {\n    setCurrentEventIndex(0);\n    setWorldEvents([]);\n    loadDefaultEvents();\n    console.log('World restarted - reset to first event and reloaded events');\n  }, [loadDefaultEvents]);\n\n  const nextEvent = useCallback(() => {\n    setCurrentEventIndex(prev => prev + 1);\n  }, []);\n\n  const createCustomEvent = useCallback((eventTitle) => {\n    return {\n      event_id: 999,\n      title: eventTitle,\n      description: \"Custom event triggered by user\",\n      political_context: {},\n      cascading_effects: []\n    };\n  }, []);\n\n  const processNextEvent = useCallback(() => {\n    if (currentEventIndex < worldEvents.length) {\n      setCurrentEventIndex(prev => prev + 1);\n    }\n  }, [currentEventIndex, worldEvents.length]);\n\n  const sendCustomEvent = useCallback((event, immediate = false) => {\n    if (immediate) {\n      // Add custom event as completed above current event\n      const newEvents = [...worldEvents];\n      newEvents.splice(currentEventIndex, 0, { ...event, completed: true });\n      setWorldEvents(newEvents);\n      setCurrentEventIndex(prev => prev + 1);\n    } else {\n      // Add to end of stack\n      setWorldEvents(prev => [...prev, event]);\n    }\n  }, [worldEvents, currentEventIndex]);\n\n  return {\n    worldEvents,\n    currentEventIndex,\n    customEvent,\n    setCustomEvent,\n    loadWorldQuest,\n    loadDefaultEvents,\n    restartWorld,\n    nextEvent,\n    createCustomEvent,\n    processNextEvent,\n    sendCustomEvent\n  };\n};\n\nexport default useWorldEvents;"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAE7C,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGL,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACM,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGP,QAAQ,CAAC,CAAC,CAAC;EAC7D,MAAM,CAACQ,WAAW,EAAEC,cAAc,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAElD,MAAMU,gBAAgB,GAAGT,WAAW,CAAC,MAAM;IACzC,MAAMU,YAAY,GAAG,CACnB;MACEC,QAAQ,EAAE,CAAC;MACXC,KAAK,EAAE,iDAAiD;MACxDC,WAAW,EAAE,+EAA+E;MAC5FC,iBAAiB,EAAE;QACjBC,WAAW,EAAE;MACf,CAAC;MACDC,iBAAiB,EAAE,CAAC,gCAAgC,EAAE,4BAA4B;IACpF,CAAC,CACF;IACDZ,cAAc,CAACM,YAAY,CAAC;EAC9B,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMO,cAAc,GAAGjB,WAAW,CAAC,YAAY;IAC7C,IAAI;MACF,MAAMkB,cAAc,GAAG,MAAMC,KAAK,CAAC,oBAAoB,CAAC;MACxD,MAAMC,UAAU,GAAG,MAAMF,cAAc,CAACG,IAAI,CAAC,CAAC;MAC9CjB,cAAc,CAACgB,UAAU,CAACE,YAAY,IAAI,EAAE,CAAC;MAC7ChB,oBAAoB,CAAC,CAAC,CAAC;MACvBiB,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;IAChD,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdF,OAAO,CAACE,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACnDC,KAAK,CAAC,uEAAuE,CAAC;IAChF;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,iBAAiB,GAAG3B,WAAW,CAAC,YAAY;IAChD,IAAI;MACF,MAAMkB,cAAc,GAAG,MAAMC,KAAK,CAAC,oBAAoB,CAAC;MACxD,MAAMC,UAAU,GAAG,MAAMF,cAAc,CAACG,IAAI,CAAC,CAAC;MAC9CjB,cAAc,CAACgB,UAAU,CAACE,YAAY,IAAI,EAAE,CAAC;IAC/C,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdF,OAAO,CAACE,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACrDhB,gBAAgB,CAAC,CAAC;IACpB;EACF,CAAC,EAAE,CAACA,gBAAgB,CAAC,CAAC;EAEtB,MAAMmB,YAAY,GAAG5B,WAAW,CAAC,MAAM;IACrCM,oBAAoB,CAAC,CAAC,CAAC;IACvBF,cAAc,CAAC,EAAE,CAAC;IAClBuB,iBAAiB,CAAC,CAAC;IACnBJ,OAAO,CAACC,GAAG,CAAC,4DAA4D,CAAC;EAC3E,CAAC,EAAE,CAACG,iBAAiB,CAAC,CAAC;EAEvB,MAAME,SAAS,GAAG7B,WAAW,CAAC,MAAM;IAClCM,oBAAoB,CAACwB,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC;EACxC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,iBAAiB,GAAG/B,WAAW,CAAEgC,UAAU,IAAK;IACpD,OAAO;MACLrB,QAAQ,EAAE,GAAG;MACbC,KAAK,EAAEoB,UAAU;MACjBnB,WAAW,EAAE,gCAAgC;MAC7CC,iBAAiB,EAAE,CAAC,CAAC;MACrBE,iBAAiB,EAAE;IACrB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMiB,gBAAgB,GAAGjC,WAAW,CAAC,MAAM;IACzC,IAAIK,iBAAiB,GAAGF,WAAW,CAAC+B,MAAM,EAAE;MAC1C5B,oBAAoB,CAACwB,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC;IACxC;EACF,CAAC,EAAE,CAACzB,iBAAiB,EAAEF,WAAW,CAAC+B,MAAM,CAAC,CAAC;EAE3C,MAAMC,eAAe,GAAGnC,WAAW,CAAC,CAACoC,KAAK,EAAEC,SAAS,GAAG,KAAK,KAAK;IAChE,IAAIA,SAAS,EAAE;MACb;MACA,MAAMC,SAAS,GAAG,CAAC,GAAGnC,WAAW,CAAC;MAClCmC,SAAS,CAACC,MAAM,CAAClC,iBAAiB,EAAE,CAAC,EAAE;QAAE,GAAG+B,KAAK;QAAEI,SAAS,EAAE;MAAK,CAAC,CAAC;MACrEpC,cAAc,CAACkC,SAAS,CAAC;MACzBhC,oBAAoB,CAACwB,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC;IACxC,CAAC,MAAM;MACL;MACA1B,cAAc,CAAC0B,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEM,KAAK,CAAC,CAAC;IAC1C;EACF,CAAC,EAAE,CAACjC,WAAW,EAAEE,iBAAiB,CAAC,CAAC;EAEpC,OAAO;IACLF,WAAW;IACXE,iBAAiB;IACjBE,WAAW;IACXC,cAAc;IACdS,cAAc;IACdU,iBAAiB;IACjBC,YAAY;IACZC,SAAS;IACTE,iBAAiB;IACjBE,gBAAgB;IAChBE;EACF,CAAC;AACH,CAAC;AAACjC,EAAA,CAjGID,cAAc;AAmGpB,eAAeA,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}