{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\win10\\\\Documents\\\\GitHub\\\\LiveNPC Engine\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [npcs, setNpcs] = useState([]);\n  const [worldEvents, setWorldEvents] = useState([]);\n  const [currentEventIndex, setCurrentEventIndex] = useState(0);\n  const [isAutoRunning, setIsAutoRunning] = useState(false);\n  const [timerInterval, setTimerInterval] = useState(15);\n  const [customEvent, setCustomEvent] = useState('');\n  const [showConfig, setShowConfig] = useState(false);\n  const [apiConfig, setApiConfig] = useState({\n    apiKey: '',\n    apiUrl: 'https://api.cerebras.ai/v1/chat/completions',\n    modelName: 'qwen-3-coder-480b'\n  });\n  const [isProcessingEvent, setIsProcessingEvent] = useState(false);\n  const [previousNpcs, setPreviousNpcs] = useState([]);\n  const [flashAnimation, setFlashAnimation] = useState(false);\n  const intervalRef = useRef(null);\n  const [rateLimitError, setRateLimitError] = useState(false);\n  const [apiCallCount, setApiCallCount] = useState(0);\n  // Removed unused lastResetTime state\n  const rateLimitRef = useRef({\n    calls: 0,\n    resetTime: Date.now()\n  });\n  const loadSampleData = useCallback(() => {\n    // Sample NPCs based on the schema\n    const sampleNpcs = [{\n      id: \"stark_001\",\n      name: \"Ser Gareth of House Stark\",\n      house: \"Stark\",\n      age: 34,\n      gender: \"male\",\n      role: \"knight\",\n      traits: {\n        honor: 82,\n        loyalty: 88,\n        intelligence: 65,\n        emotional_intelligence: 70,\n        evil: 12,\n        selflessness: 75,\n        ambition: 35,\n        combat_skill: 80,\n        political_cunning: 45,\n        religious_devotion: 65\n      },\n      relationships: [{\n        npc_id: \"stark_002\",\n        relationship_type: \"family\",\n        strength: 90\n      }, {\n        npc_id: \"stark_015\",\n        relationship_type: \"ally\",\n        strength: 75\n      }],\n      current_behavior: \"Patrolling the borders with quiet determination\",\n      location: \"Winterfell\",\n      status: \"alive\"\n    }];\n    const sampleEvents = [{\n      event_id: 1,\n      title: \"Lord Jon Arryn of House Arryn dies mysteriously\",\n      description: \"The Hand of the King dies suddenly, creating a power vacuum in King's Landing\",\n      political_context: {\n        house_stark: \"Ned Stark of House Stark reluctantly accepts Hand position, honor compels duty to realm\"\n      },\n      cascading_effects: [\"Power vacuum in King's Landing\", \"Stark family travels south\"]\n    }];\n    setNpcs(sampleNpcs);\n    setWorldEvents(sampleEvents);\n  }, []);\n  const loadDefaultData = useCallback(async () => {\n    try {\n      // Load NPCs\n      const npcResponse = await fetch('/dataset/npcs_100.json');\n      const npcData = await npcResponse.json();\n      setNpcs(npcData.npcs || []);\n\n      // Load World Events\n      const eventsResponse = await fetch('/world_events.json');\n      const eventsData = await eventsResponse.json();\n      setWorldEvents(eventsData.world_events || []);\n    } catch (error) {\n      console.error('Error loading default data:', error);\n      // Fallback to sample data if files not found\n      loadSampleData();\n    }\n  }, [loadSampleData]);\n\n  // Load environment variables on component mount\n  useEffect(() => {\n    const envApiKey = process.env.REACT_APP_CEREBRAS_API_KEY;\n    const envApiUrl = process.env.REACT_APP_CEREBRAS_API_URL;\n    const envModelName = process.env.REACT_APP_MODEL_NAME;\n    if (envApiKey || envApiUrl || envModelName) {\n      setApiConfig({\n        apiKey: envApiKey || '',\n        apiUrl: envApiUrl || 'https://api.cerebras.ai/v1/chat/completions',\n        modelName: envModelName || 'qwen-3-coder-480b'\n      });\n    }\n  }, []);\n\n  // Load default data on component mount\n  useEffect(() => {\n    loadDefaultData();\n  }, [loadDefaultData]);\n  const loadWorldQuest = async () => {\n    try {\n      const eventsResponse = await fetch('/world_events.json');\n      const eventsData = await eventsResponse.json();\n      setWorldEvents(eventsData.world_events || []);\n      setCurrentEventIndex(0); // Reset to first event\n      console.log('World Quest loaded successfully');\n    } catch (error) {\n      console.error('Error loading world events:', error);\n      alert('Failed to load World Quest. Please check if world_events.json exists.');\n    }\n  };\n  const loadPersona = async () => {\n    try {\n      // Try loading 300 NPCs first, fallback to 100\n      let npcResponse;\n      try {\n        npcResponse = await fetch('/dataset/npcs_300.json');\n      } catch {\n        npcResponse = await fetch('/dataset/npcs_100.json');\n      }\n      const npcData = await npcResponse.json();\n      setNpcs(npcData.npcs || []);\n      console.log('Persona data loaded successfully');\n    } catch (error) {\n      console.error('Error loading persona data:', error);\n      alert('Failed to load Persona data. Please check if NPC files exist.');\n    }\n  };\n  const restartWorld = () => {\n    setCurrentEventIndex(0);\n    setIsAutoRunning(false);\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n    console.log('World restarted - reset to first event');\n  };\n  const checkRateLimit = () => {\n    const now = Date.now();\n    const oneMinute = 60 * 1000;\n\n    // Reset counter every minute\n    if (now - rateLimitRef.current.resetTime > oneMinute) {\n      rateLimitRef.current.calls = 0;\n      rateLimitRef.current.resetTime = now;\n      setApiCallCount(0);\n      setLastResetTime(now);\n      setRateLimitError(false);\n    }\n\n    // Check if we're at the limit (9 calls to leave buffer)\n    if (rateLimitRef.current.calls >= 9) {\n      setRateLimitError(true);\n      return false;\n    }\n    return true;\n  };\n  const updateAllNPCsWithAI = async (npcsArray, event) => {\n    const {\n      apiKey,\n      apiUrl,\n      modelName\n    } = apiConfig;\n    if (!apiKey || apiKey.trim() === '') {\n      console.warn('Cerebras API key not configured. Using fallback simulation.');\n      return npcsArray.map(npc => simulateNPCUpdate(npc, event));\n    }\n\n    // Check rate limit before making API call\n    if (!checkRateLimit()) {\n      console.warn(`Rate limit reached (${rateLimitRef.current.calls}/10 calls per minute). Using simulation for all NPCs`);\n      return npcsArray.map(npc => simulateNPCUpdate(npc, event));\n    }\n    const prompt = `You are an expert AI agent simulating NPC evolution in a Game of Thrones universe. Update ALL NPCs in the dataset based on the world event, ensuring changes align with Westerosi lore, politics, and character archetypes. Use the empirical formula: NPC Persona (with current action) Ã— World Event = New Action + Change in Persona.\n\nNPC Dataset (JSON schema-compliant):\n${JSON.stringify(npcsArray, null, 2)}\n\nWorld Event:\n${event.title} - ${event.description}\n\nReason step by step:\n1. Assess impact: How does the event affect EACH NPC's house, role, location, status, traits, and relationships? Factor in traits (e.g., high evil amplifies malice, low loyalty risks defection).\n2. New Action: Craft a concise natural language description of updated mood/actions for each NPC, grounded in lore. Use 'current_action' field instead of 'current_behavior'.\n3. Persona Changes: Adjust traits by -20 to +20 max (subtle shifts); modify relationship strengths by -30 to +30 or add/remove if logical; update location/status only if directly implied.\n4. Consistency: Avoid drastic overhaulsâ€”events ripple, not revolutionize. Preserve JSON schema integrity.\n5. Process the ENTIRE dataset as a cohesive world where NPCs may interact and influence each other.\n\nOutput ONLY the updated NPC dataset as a JSON array. No extra text.`;\n    try {\n      console.log('Calling Cerebras API with model:', modelName, 'for', npcsArray.length, 'NPCs');\n\n      // Increment rate limit counter\n      rateLimitRef.current.calls++;\n      setApiCallCount(rateLimitRef.current.calls);\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${apiKey}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          model: modelName,\n          messages: [{\n            role: \"system\",\n            content: \"You are an expert Game of Thrones NPC simulation engine. Always respond with valid JSON array only.\"\n          }, {\n            role: \"user\",\n            content: prompt\n          }],\n          temperature: 0.7,\n          max_completion_tokens: 8000,\n          top_p: 0.8,\n          stream: false\n        })\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('API Error Response:', errorText);\n\n        // Handle rate limit specifically\n        if (response.status === 429) {\n          console.error('Rate limit exceeded! Switching to simulation mode.');\n          setRateLimitError(true);\n          return npcsArray.map(npc => simulateNPCUpdate(npc, event));\n        }\n        throw new Error(`HTTP error! status: ${response.status}, message: ${errorText}`);\n      }\n      const responseData = await response.json();\n      const aiResponse = responseData.choices[0].message.content;\n\n      // Clean and parse the AI response as JSON\n      try {\n        // Clean the response by removing potential markdown formatting\n        let cleanedResponse = aiResponse.trim();\n\n        // Remove markdown code blocks if present\n        if (cleanedResponse.startsWith('```json')) {\n          cleanedResponse = cleanedResponse.replace(/^```json\\s*/, '').replace(/\\s*```$/, '');\n        } else if (cleanedResponse.startsWith('```')) {\n          cleanedResponse = cleanedResponse.replace(/^```\\s*/, '').replace(/\\s*```$/, '');\n        }\n\n        // Try to extract JSON array if response contains extra text\n        const jsonMatch = cleanedResponse.match(/\\[[\\s\\S]*\\]/);\n        if (jsonMatch) {\n          cleanedResponse = jsonMatch[0];\n        }\n        const updatedNpcs = JSON.parse(cleanedResponse);\n\n        // Validate that it's an array and has the right length\n        if (Array.isArray(updatedNpcs) && updatedNpcs.length === npcsArray.length) {\n          return updatedNpcs;\n        } else {\n          console.warn('Invalid NPC array structure returned by AI. Expected:', npcsArray.length, 'Got:', updatedNpcs.length);\n          throw new Error('Invalid NPC array structure returned by AI');\n        }\n      } catch (parseError) {\n        console.error('Failed to parse AI response as JSON:', parseError);\n        console.log('Raw AI Response:', aiResponse);\n        console.log('Response length:', aiResponse.length);\n        // Fallback to simulation for all NPCs\n        return npcsArray.map(npc => simulateNPCUpdate(npc, event));\n      }\n    } catch (error) {\n      console.error('Error calling Cerebras API:', error);\n      return npcsArray.map(npc => simulateNPCUpdate(npc, event));\n    }\n  };\n\n  // Legacy function removed - replaced by updateAllNPCsWithAI\n\n  const simulateNPCUpdate = (npc, event) => {\n    // Fallback simulation when AI is not available\n    const updatedNpc = {\n      ...npc\n    };\n\n    // Simulate trait changes based on event\n    if (event.title.includes('dies') || event.title.includes('executed')) {\n      updatedNpc.traits.honor = Math.max(0, Math.min(100, updatedNpc.traits.honor + (Math.random() * 20 - 10)));\n      updatedNpc.traits.loyalty = Math.max(0, Math.min(100, updatedNpc.traits.loyalty + (Math.random() * 15 - 5)));\n      updatedNpc.current_action = `Reacting to recent tragic events with ${updatedNpc.traits.honor > 70 ? 'righteous anger' : 'calculated caution'}`;\n    } else if (event.title.includes('war') || event.title.includes('battle')) {\n      updatedNpc.traits.ambition = Math.max(0, Math.min(100, updatedNpc.traits.ambition + (Math.random() * 15 - 5)));\n      updatedNpc.current_action = `Preparing for the conflicts ahead with ${updatedNpc.traits.ambition > 70 ? 'eager anticipation' : 'cautious planning'}`;\n    } else {\n      updatedNpc.traits.intelligence = Math.max(0, Math.min(100, updatedNpc.traits.intelligence + (Math.random() * 10 - 5)));\n      updatedNpc.current_action = `Adapting to changing circumstances with ${updatedNpc.traits.intelligence > 70 ? 'strategic thinking' : 'careful observation'}`;\n    }\n    return updatedNpc;\n  };\n  const processNextEvent = async () => {\n    if (currentEventIndex >= worldEvents.length) {\n      setIsAutoRunning(false);\n      return;\n    }\n\n    // Start loading animation\n    setIsProcessingEvent(true);\n\n    // Store previous NPC data before updating\n    setPreviousNpcs([...npcs]);\n    const currentEvent = worldEvents[currentEventIndex];\n    console.log(`Processing event: ${currentEvent.title}`);\n    console.log(`Current API calls this minute: ${rateLimitRef.current.calls}/10`);\n\n    // Use the new batch processing function - processes entire dataset in single call\n    const updatedNpcs = await updateAllNPCsWithAI(npcs, currentEvent);\n    console.log(`Event completed. Processed ${npcs.length} NPCs in single API call`);\n\n    // Update NPCs and trigger flash animation\n    setNpcs(updatedNpcs);\n    setCurrentEventIndex(prev => prev + 1);\n\n    // End loading animation\n    setIsProcessingEvent(false);\n\n    // Trigger flash animation for new data\n    setFlashAnimation(true);\n    setTimeout(() => setFlashAnimation(false), 1000);\n  };\n  const startAutoRun = () => {\n    setIsAutoRunning(true);\n    intervalRef.current = setInterval(() => {\n      processNextEvent();\n    }, timerInterval * 1000);\n  };\n  const stopAutoRun = () => {\n    setIsAutoRunning(false);\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n    }\n  };\n  const sendCustomEvent = async () => {\n    if (!customEvent.trim()) return;\n    const event = {\n      event_id: 999,\n      title: customEvent,\n      description: \"Custom event triggered by user\",\n      political_context: {},\n      cascading_effects: []\n    };\n\n    // Start loading animation\n    setIsProcessingEvent(true);\n\n    // Store previous NPC data before updating\n    setPreviousNpcs([...npcs]);\n    console.log(`Processing custom event: ${customEvent}`);\n    console.log(`Current API calls this minute: ${rateLimitRef.current.calls}/10`);\n\n    // Use the new batch processing function - processes entire dataset in single call\n    const updatedNpcsFromCustomEvent = await updateAllNPCsWithAI(npcs, event);\n    console.log(`Custom event completed. Processed ${npcs.length} NPCs in single API call`);\n    setNpcs(updatedNpcsFromCustomEvent);\n    setCustomEvent('');\n\n    // End loading animation\n    setIsProcessingEvent(false);\n\n    // Trigger flash animation for new data\n    setFlashAnimation(true);\n    setTimeout(() => setFlashAnimation(false), 1000);\n  };\n  const formatNPCDisplay = npc => {\n    const traits = npc.traits;\n    const relationships = npc.relationships || [];\n    const relationshipText = relationships.map(rel => `ðŸ‘¨â€ðŸ‘¦ ${rel.npc_id} ${rel.relationship_type} Str${rel.strength}`).join(' ') || '';\n    const genderIcon = npc.gender === 'male' ? 'ðŸ‘¨M' : 'ðŸ‘©F';\n    const houseShort = npc.house.replace('House ', '');\n\n    // Find previous data for this NPC\n    const previousNpc = previousNpcs.find(prevNpc => prevNpc.id === npc.id);\n    const formatTooltipData = npcData => {\n      if (!npcData) return 'No previous data available';\n      const prevTraits = npcData.traits;\n      return `Previous State:\\nHonor: ${prevTraits.honor} Loyal: ${prevTraits.loyalty} IQ: ${prevTraits.intelligence} EQ: ${prevTraits.emotional_intelligence}\\nEvil: ${prevTraits.evil} Selfless: ${prevTraits.selflessness} Ambition: ${prevTraits.ambition}\\nCombat: ${prevTraits.combat_skill} Political: ${prevTraits.political_cunning} Religion: ${prevTraits.religious_devotion}\\nLocation: ${npcData.location || 'Unknown'} Status: ${npcData.status}\\nBehavior: ${npcData.current_action || npcData.current_behavior || 'Idle'}`;\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"npc-card-two-line\",\n      title: formatTooltipData(previousNpc),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"npc-line-1\",\n        children: [\"id: \", npc.id, \" name: \", npc.name, \" \\uD83C\\uDFE0 \", houseShort, \" \\uD83D\\uDD1E\", npc.age, \" \", genderIcon, \" \\uD83D\\uDCBC \", npc.role, \" | Honor: \", traits.honor, \" Loyal: \", traits.loyalty, \" IQ: \", traits.intelligence, \" EQ: \", traits.emotional_intelligence, \" Evil: \", traits.evil, \" Selfless: \", traits.selflessness, \" Ambition: \", traits.ambition, \" Combat: \", traits.combat_skill, \" Political: \", traits.political_cunning, \" Religion: \", traits.religious_devotion, \" \", relationshipText]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"npc-line-2\",\n        children: [\"\\uD83C\\uDF0D \", npc.location || 'Unknown', \" \\uD83D\\uDFE2 \", npc.status, \" Current_Behavior: \", npc.current_action || npc.current_behavior || 'Idle']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this)]\n    }, npc.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 7\n    }, this);\n  };\n  const getGroupedStats = () => {\n    const houseStats = {};\n    const genderStats = {};\n    const locationStats = {};\n    npcs.forEach(npc => {\n      const house = npc.house.replace('House ', '');\n      houseStats[house] = (houseStats[house] || 0) + 1;\n      genderStats[npc.gender] = (genderStats[npc.gender] || 0) + 1;\n      const location = npc.location || 'Unknown';\n      locationStats[location] = (locationStats[location] || 0) + 1;\n    });\n    return {\n      houseStats,\n      genderStats,\n      locationStats\n    };\n  };\n  const {\n    houseStats,\n    genderStats,\n    locationStats\n  } = getGroupedStats();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"app-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Live NPC Engine\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: loadWorldQuest,\n          className: \"load-btn\",\n          children: \"\\uD83D\\uDCDC Load World Quest\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: loadPersona,\n          className: \"load-btn\",\n          children: \"\\uD83D\\uDC65 Load Persona\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: restartWorld,\n          className: \"restart-btn\",\n          children: \"\\uD83D\\uDD04 Restart World\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowConfig(true),\n          className: \"config-btn\",\n          children: \"\\u2699\\uFE0F AI Engine Config\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 7\n    }, this), showConfig && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"config-modal\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"config-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"AI Engine Configuration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"config-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"config-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Cerebras API Key:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              value: apiConfig.apiKey,\n              onChange: e => setApiConfig({\n                ...apiConfig,\n                apiKey: e.target.value\n              }),\n              placeholder: \"Enter your Cerebras API key\",\n              className: \"config-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"config-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"API URL:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: apiConfig.apiUrl,\n              onChange: e => setApiConfig({\n                ...apiConfig,\n                apiUrl: e.target.value\n              }),\n              className: \"config-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"config-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Model Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: apiConfig.modelName,\n              onChange: e => setApiConfig({\n                ...apiConfig,\n                modelName: e.target.value\n              }),\n              className: \"config-select\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"qwen-3-coder-480b\",\n                children: \"Qwen 3 Coder 480B (Default)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"qwen-3-235b-a22b-instruct-2507\",\n                children: \"Qwen 3 235B A22B Instruct 2507\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"qwen-3-235b-a22b-thinking-2507\",\n                children: \"Qwen 3 235B A22B Thinking 2507\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"llama-3.3-70b\",\n                children: \"Llama 3.3 70B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"qwen-3-32b\",\n                children: \"Qwen 3 32B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"deepseek-r1-distill-llama-70b\",\n                children: \"DeepSeek R1 Distill Llama 70B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"config-status\",\n            children: apiConfig.apiKey ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"status-connected\",\n              children: \"\\uD83D\\uDFE2 API Key Configured\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"status-disconnected\",\n              children: \"\\uD83D\\uDD34 API Key Required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"config-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowConfig(false),\n            className: \"config-save-btn\",\n            children: \"Save & Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowConfig(false),\n            className: \"config-cancel-btn\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"left-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"NPCs (\", npcs.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stats-display\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Houses:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 15\n            }, this), \" \", Object.entries(houseStats).map(([house, count]) => `${house}(${count})`).join(', ')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Gender:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 15\n            }, this), \" \", Object.entries(genderStats).map(([gender, count]) => `${gender}(${count})`).join(', ')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Locations:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 15\n            }, this), \" \", Object.entries(locationStats).map(([location, count]) => `${location}(${count})`).join(', ')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-group rate-limit-status\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"API Usage:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: rateLimitError ? 'rate-limit-error' : apiCallCount >= 7 ? 'rate-limit-warning' : 'rate-limit-ok',\n              children: [apiCallCount, \"/10 calls this minute\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 15\n            }, this), rateLimitError && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"rate-limit-message\",\n              children: \" \\u26A0\\uFE0F Rate limit reached - using simulation mode\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `npc-list ${flashAnimation ? 'flash-animation' : ''}`,\n          children: npcs.map(npc => formatNPCDisplay(npc))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-panel\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"world-events-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"World Events\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"event-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"timer-controls\",\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Auto Timer:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: timerInterval,\n                  onChange: e => setTimerInterval(parseInt(e.target.value)),\n                  min: \"5\",\n                  max: \"300\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 571,\n                  columnNumber: 19\n                }, this), \" sec\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 569,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"control-buttons\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  if (currentEventIndex === 0) {\n                    processNextEvent();\n                  }\n                },\n                className: \"manual-start-btn\",\n                children: \"\\uD83D\\uDE80 Manual Start Event\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 17\n              }, this), !isAutoRunning ? /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startAutoRun,\n                className: \"start-btn\",\n                children: \"\\u25B6\\uFE0F Auto Events\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 591,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: stopAutoRun,\n                className: \"stop-btn\",\n                children: \"\\u23F8\\uFE0F Pause Auto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: processNextEvent,\n                className: \"next-btn\",\n                children: \"\\u23ED\\uFE0F Next Event\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 600,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"custom-event\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Custom event...\",\n                value: customEvent,\n                onChange: e => setCustomEvent(e.target.value),\n                className: \"custom-event-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: sendCustomEvent,\n                className: \"send-btn\",\n                children: \"\\uD83D\\uDCE4 Send\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 613,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"events-stack\",\n            style: {\n              position: 'relative'\n            },\n            children: [isProcessingEvent && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-overlay\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-spinner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 622,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-text\",\n                children: \"Executing World Event...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 623,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 621,\n              columnNumber: 17\n            }, this), worldEvents.map((event, index) => {\n              let statusClass = 'event-pending';\n              if (index < currentEventIndex) {\n                statusClass = 'event-completed';\n              } else if (index === currentEventIndex) {\n                statusClass = 'event-running';\n              }\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `event-card-stack ${statusClass}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"event-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"event-number\",\n                    children: [\"#\", event.event_id]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 637,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"event-status-indicator\",\n                    children: index < currentEventIndex ? 'âœ…' : index === currentEventIndex ? 'ðŸ”„' : 'â³'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 638,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 636,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"event-title\",\n                  children: event.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 642,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"event-description\",\n                  children: event.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 21\n                }, this)]\n              }, event.event_id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 635,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 619,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 455,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"a0cJcgcwZX5u50SdNmMlRk8Yeuw=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","jsxDEV","_jsxDEV","App","_s","npcs","setNpcs","worldEvents","setWorldEvents","currentEventIndex","setCurrentEventIndex","isAutoRunning","setIsAutoRunning","timerInterval","setTimerInterval","customEvent","setCustomEvent","showConfig","setShowConfig","apiConfig","setApiConfig","apiKey","apiUrl","modelName","isProcessingEvent","setIsProcessingEvent","previousNpcs","setPreviousNpcs","flashAnimation","setFlashAnimation","intervalRef","rateLimitError","setRateLimitError","apiCallCount","setApiCallCount","rateLimitRef","calls","resetTime","Date","now","loadSampleData","sampleNpcs","id","name","house","age","gender","role","traits","honor","loyalty","intelligence","emotional_intelligence","evil","selflessness","ambition","combat_skill","political_cunning","religious_devotion","relationships","npc_id","relationship_type","strength","current_behavior","location","status","sampleEvents","event_id","title","description","political_context","house_stark","cascading_effects","loadDefaultData","npcResponse","fetch","npcData","json","eventsResponse","eventsData","world_events","error","console","envApiKey","process","env","REACT_APP_CEREBRAS_API_KEY","envApiUrl","REACT_APP_CEREBRAS_API_URL","envModelName","REACT_APP_MODEL_NAME","loadWorldQuest","log","alert","loadPersona","restartWorld","current","clearInterval","checkRateLimit","oneMinute","setLastResetTime","updateAllNPCsWithAI","npcsArray","event","trim","warn","map","npc","simulateNPCUpdate","prompt","JSON","stringify","length","response","method","headers","body","model","messages","content","temperature","max_completion_tokens","top_p","stream","ok","errorText","text","Error","responseData","aiResponse","choices","message","cleanedResponse","startsWith","replace","jsonMatch","match","updatedNpcs","parse","Array","isArray","parseError","updatedNpc","includes","Math","max","min","random","current_action","processNextEvent","currentEvent","prev","setTimeout","startAutoRun","setInterval","stopAutoRun","sendCustomEvent","updatedNpcsFromCustomEvent","formatNPCDisplay","relationshipText","rel","join","genderIcon","houseShort","previousNpc","find","prevNpc","formatTooltipData","prevTraits","className","children","fileName","_jsxFileName","lineNumber","columnNumber","getGroupedStats","houseStats","genderStats","locationStats","forEach","onClick","type","value","onChange","e","target","placeholder","Object","entries","count","parseInt","style","position","index","statusClass","_c","$RefreshReg$"],"sources":["C:/Users/win10/Documents/GitHub/LiveNPC Engine/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport './App.css';\n\nconst App = () => {\n  const [npcs, setNpcs] = useState([]);\n  const [worldEvents, setWorldEvents] = useState([]);\n  const [currentEventIndex, setCurrentEventIndex] = useState(0);\n  const [isAutoRunning, setIsAutoRunning] = useState(false);\n  const [timerInterval, setTimerInterval] = useState(15);\n  const [customEvent, setCustomEvent] = useState('');\n  const [showConfig, setShowConfig] = useState(false);\n  const [apiConfig, setApiConfig] = useState({\n    apiKey: '',\n    apiUrl: 'https://api.cerebras.ai/v1/chat/completions',\n    modelName: 'qwen-3-coder-480b'\n  });\n  const [isProcessingEvent, setIsProcessingEvent] = useState(false);\n  const [previousNpcs, setPreviousNpcs] = useState([]);\n  const [flashAnimation, setFlashAnimation] = useState(false);\n  const intervalRef = useRef(null);\n  const [rateLimitError, setRateLimitError] = useState(false);\n  const [apiCallCount, setApiCallCount] = useState(0);\n  // Removed unused lastResetTime state\n  const rateLimitRef = useRef({ calls: 0, resetTime: Date.now() });\n\n  const loadSampleData = useCallback(() => {\n    // Sample NPCs based on the schema\n    const sampleNpcs = [\n      {\n        id: \"stark_001\",\n        name: \"Ser Gareth of House Stark\",\n        house: \"Stark\",\n        age: 34,\n        gender: \"male\",\n        role: \"knight\",\n        traits: {\n          honor: 82,\n          loyalty: 88,\n          intelligence: 65,\n          emotional_intelligence: 70,\n          evil: 12,\n          selflessness: 75,\n          ambition: 35,\n          combat_skill: 80,\n          political_cunning: 45,\n          religious_devotion: 65\n        },\n        relationships: [\n          { npc_id: \"stark_002\", relationship_type: \"family\", strength: 90 },\n          { npc_id: \"stark_015\", relationship_type: \"ally\", strength: 75 }\n        ],\n        current_behavior: \"Patrolling the borders with quiet determination\",\n        location: \"Winterfell\",\n        status: \"alive\"\n      }\n    ];\n\n    const sampleEvents = [\n      {\n        event_id: 1,\n        title: \"Lord Jon Arryn of House Arryn dies mysteriously\",\n        description: \"The Hand of the King dies suddenly, creating a power vacuum in King's Landing\",\n        political_context: {\n          house_stark: \"Ned Stark of House Stark reluctantly accepts Hand position, honor compels duty to realm\"\n        },\n        cascading_effects: [\"Power vacuum in King's Landing\", \"Stark family travels south\"]\n      }\n    ];\n\n    setNpcs(sampleNpcs);\n    setWorldEvents(sampleEvents);\n  }, []);\n\n  const loadDefaultData = useCallback(async () => {\n    try {\n      // Load NPCs\n      const npcResponse = await fetch('/dataset/npcs_100.json');\n      const npcData = await npcResponse.json();\n      setNpcs(npcData.npcs || []);\n\n      // Load World Events\n      const eventsResponse = await fetch('/world_events.json');\n      const eventsData = await eventsResponse.json();\n      setWorldEvents(eventsData.world_events || []);\n    } catch (error) {\n      console.error('Error loading default data:', error);\n      // Fallback to sample data if files not found\n      loadSampleData();\n    }\n  }, [loadSampleData]);\n\n  // Load environment variables on component mount\n  useEffect(() => {\n    const envApiKey = process.env.REACT_APP_CEREBRAS_API_KEY;\n    const envApiUrl = process.env.REACT_APP_CEREBRAS_API_URL;\n    const envModelName = process.env.REACT_APP_MODEL_NAME;\n    \n    if (envApiKey || envApiUrl || envModelName) {\n      setApiConfig({\n        apiKey: envApiKey || '',\n        apiUrl: envApiUrl || 'https://api.cerebras.ai/v1/chat/completions',\n        modelName: envModelName || 'qwen-3-coder-480b'\n      });\n    }\n  }, []);\n\n  // Load default data on component mount\n  useEffect(() => {\n    loadDefaultData();\n  }, [loadDefaultData]);\n\n  const loadWorldQuest = async () => {\n    try {\n      const eventsResponse = await fetch('/world_events.json');\n      const eventsData = await eventsResponse.json();\n      setWorldEvents(eventsData.world_events || []);\n      setCurrentEventIndex(0); // Reset to first event\n      console.log('World Quest loaded successfully');\n    } catch (error) {\n      console.error('Error loading world events:', error);\n      alert('Failed to load World Quest. Please check if world_events.json exists.');\n    }\n  };\n\n  const loadPersona = async () => {\n    try {\n      // Try loading 300 NPCs first, fallback to 100\n      let npcResponse;\n      try {\n        npcResponse = await fetch('/dataset/npcs_300.json');\n      } catch {\n        npcResponse = await fetch('/dataset/npcs_100.json');\n      }\n      const npcData = await npcResponse.json();\n      setNpcs(npcData.npcs || []);\n      console.log('Persona data loaded successfully');\n    } catch (error) {\n      console.error('Error loading persona data:', error);\n      alert('Failed to load Persona data. Please check if NPC files exist.');\n    }\n  };\n\n  const restartWorld = () => {\n    setCurrentEventIndex(0);\n    setIsAutoRunning(false);\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n    console.log('World restarted - reset to first event');\n  };\n\n  const checkRateLimit = () => {\n    const now = Date.now();\n    const oneMinute = 60 * 1000;\n    \n    // Reset counter every minute\n    if (now - rateLimitRef.current.resetTime > oneMinute) {\n      rateLimitRef.current.calls = 0;\n      rateLimitRef.current.resetTime = now;\n      setApiCallCount(0);\n      setLastResetTime(now);\n      setRateLimitError(false);\n    }\n    \n    // Check if we're at the limit (9 calls to leave buffer)\n    if (rateLimitRef.current.calls >= 9) {\n      setRateLimitError(true);\n      return false;\n    }\n    \n    return true;\n  };\n\n  const updateAllNPCsWithAI = async (npcsArray, event) => {\n    const { apiKey, apiUrl, modelName } = apiConfig;\n\n    if (!apiKey || apiKey.trim() === '') {\n      console.warn('Cerebras API key not configured. Using fallback simulation.');\n      return npcsArray.map(npc => simulateNPCUpdate(npc, event));\n    }\n    \n    // Check rate limit before making API call\n    if (!checkRateLimit()) {\n      console.warn(`Rate limit reached (${rateLimitRef.current.calls}/10 calls per minute). Using simulation for all NPCs`);\n      return npcsArray.map(npc => simulateNPCUpdate(npc, event));\n    }\n\n    const prompt = `You are an expert AI agent simulating NPC evolution in a Game of Thrones universe. Update ALL NPCs in the dataset based on the world event, ensuring changes align with Westerosi lore, politics, and character archetypes. Use the empirical formula: NPC Persona (with current action) Ã— World Event = New Action + Change in Persona.\n\nNPC Dataset (JSON schema-compliant):\n${JSON.stringify(npcsArray, null, 2)}\n\nWorld Event:\n${event.title} - ${event.description}\n\nReason step by step:\n1. Assess impact: How does the event affect EACH NPC's house, role, location, status, traits, and relationships? Factor in traits (e.g., high evil amplifies malice, low loyalty risks defection).\n2. New Action: Craft a concise natural language description of updated mood/actions for each NPC, grounded in lore. Use 'current_action' field instead of 'current_behavior'.\n3. Persona Changes: Adjust traits by -20 to +20 max (subtle shifts); modify relationship strengths by -30 to +30 or add/remove if logical; update location/status only if directly implied.\n4. Consistency: Avoid drastic overhaulsâ€”events ripple, not revolutionize. Preserve JSON schema integrity.\n5. Process the ENTIRE dataset as a cohesive world where NPCs may interact and influence each other.\n\nOutput ONLY the updated NPC dataset as a JSON array. No extra text.`;\n\n    try {\n      console.log('Calling Cerebras API with model:', modelName, 'for', npcsArray.length, 'NPCs');\n      \n      // Increment rate limit counter\n      rateLimitRef.current.calls++;\n      setApiCallCount(rateLimitRef.current.calls);\n      \n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${apiKey}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          model: modelName,\n          messages: [\n            {\n              role: \"system\",\n              content: \"You are an expert Game of Thrones NPC simulation engine. Always respond with valid JSON array only.\"\n            },\n            {\n              role: \"user\",\n              content: prompt\n            }\n          ],\n          temperature: 0.7,\n          max_completion_tokens: 8000,\n          top_p: 0.8,\n          stream: false\n        })\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('API Error Response:', errorText);\n        \n        // Handle rate limit specifically\n        if (response.status === 429) {\n          console.error('Rate limit exceeded! Switching to simulation mode.');\n          setRateLimitError(true);\n          return npcsArray.map(npc => simulateNPCUpdate(npc, event));\n        }\n        \n        throw new Error(`HTTP error! status: ${response.status}, message: ${errorText}`);\n      }\n\n      const responseData = await response.json();\n      const aiResponse = responseData.choices[0].message.content;\n      \n      // Clean and parse the AI response as JSON\n      try {\n        // Clean the response by removing potential markdown formatting\n        let cleanedResponse = aiResponse.trim();\n        \n        // Remove markdown code blocks if present\n        if (cleanedResponse.startsWith('```json')) {\n          cleanedResponse = cleanedResponse.replace(/^```json\\s*/, '').replace(/\\s*```$/, '');\n        } else if (cleanedResponse.startsWith('```')) {\n          cleanedResponse = cleanedResponse.replace(/^```\\s*/, '').replace(/\\s*```$/, '');\n        }\n        \n        // Try to extract JSON array if response contains extra text\n        const jsonMatch = cleanedResponse.match(/\\[[\\s\\S]*\\]/);\n        if (jsonMatch) {\n          cleanedResponse = jsonMatch[0];\n        }\n        \n        const updatedNpcs = JSON.parse(cleanedResponse);\n        \n        // Validate that it's an array and has the right length\n        if (Array.isArray(updatedNpcs) && updatedNpcs.length === npcsArray.length) {\n          return updatedNpcs;\n        } else {\n          console.warn('Invalid NPC array structure returned by AI. Expected:', npcsArray.length, 'Got:', updatedNpcs.length);\n          throw new Error('Invalid NPC array structure returned by AI');\n        }\n      } catch (parseError) {\n        console.error('Failed to parse AI response as JSON:', parseError);\n        console.log('Raw AI Response:', aiResponse);\n        console.log('Response length:', aiResponse.length);\n        // Fallback to simulation for all NPCs\n        return npcsArray.map(npc => simulateNPCUpdate(npc, event));\n      }\n    } catch (error) {\n      console.error('Error calling Cerebras API:', error);\n      return npcsArray.map(npc => simulateNPCUpdate(npc, event));\n    }\n  };\n\n  // Legacy function removed - replaced by updateAllNPCsWithAI\n\n  const simulateNPCUpdate = (npc, event) => {\n    // Fallback simulation when AI is not available\n    const updatedNpc = { ...npc };\n    \n    // Simulate trait changes based on event\n    if (event.title.includes('dies') || event.title.includes('executed')) {\n      updatedNpc.traits.honor = Math.max(0, Math.min(100, updatedNpc.traits.honor + (Math.random() * 20 - 10)));\n      updatedNpc.traits.loyalty = Math.max(0, Math.min(100, updatedNpc.traits.loyalty + (Math.random() * 15 - 5)));\n      updatedNpc.current_action = `Reacting to recent tragic events with ${updatedNpc.traits.honor > 70 ? 'righteous anger' : 'calculated caution'}`;\n    } else if (event.title.includes('war') || event.title.includes('battle')) {\n      updatedNpc.traits.ambition = Math.max(0, Math.min(100, updatedNpc.traits.ambition + (Math.random() * 15 - 5)));\n      updatedNpc.current_action = `Preparing for the conflicts ahead with ${updatedNpc.traits.ambition > 70 ? 'eager anticipation' : 'cautious planning'}`;\n    } else {\n      updatedNpc.traits.intelligence = Math.max(0, Math.min(100, updatedNpc.traits.intelligence + (Math.random() * 10 - 5)));\n      updatedNpc.current_action = `Adapting to changing circumstances with ${updatedNpc.traits.intelligence > 70 ? 'strategic thinking' : 'careful observation'}`;\n    }\n\n    return updatedNpc;\n  };\n\n  const processNextEvent = async () => {\n    if (currentEventIndex >= worldEvents.length) {\n      setIsAutoRunning(false);\n      return;\n    }\n\n    // Start loading animation\n    setIsProcessingEvent(true);\n    \n    // Store previous NPC data before updating\n    setPreviousNpcs([...npcs]);\n\n    const currentEvent = worldEvents[currentEventIndex];\n\n    console.log(`Processing event: ${currentEvent.title}`);\n    console.log(`Current API calls this minute: ${rateLimitRef.current.calls}/10`);\n\n    // Use the new batch processing function - processes entire dataset in single call\n    const updatedNpcs = await updateAllNPCsWithAI(npcs, currentEvent);\n    \n    console.log(`Event completed. Processed ${npcs.length} NPCs in single API call`);\n\n    // Update NPCs and trigger flash animation\n    setNpcs(updatedNpcs);\n    setCurrentEventIndex(prev => prev + 1);\n    \n    // End loading animation\n    setIsProcessingEvent(false);\n    \n    // Trigger flash animation for new data\n    setFlashAnimation(true);\n    setTimeout(() => setFlashAnimation(false), 1000);\n  };\n\n  const startAutoRun = () => {\n    setIsAutoRunning(true);\n    intervalRef.current = setInterval(() => {\n      processNextEvent();\n    }, timerInterval * 1000);\n  };\n\n  const stopAutoRun = () => {\n    setIsAutoRunning(false);\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n    }\n  };\n\n  const sendCustomEvent = async () => {\n    if (!customEvent.trim()) return;\n\n    const event = {\n      event_id: 999,\n      title: customEvent,\n      description: \"Custom event triggered by user\",\n      political_context: {},\n      cascading_effects: []\n    };\n\n    // Start loading animation\n    setIsProcessingEvent(true);\n    \n    // Store previous NPC data before updating\n    setPreviousNpcs([...npcs]);\n\n    console.log(`Processing custom event: ${customEvent}`);\n    console.log(`Current API calls this minute: ${rateLimitRef.current.calls}/10`);\n\n    // Use the new batch processing function - processes entire dataset in single call\n    const updatedNpcsFromCustomEvent = await updateAllNPCsWithAI(npcs, event);\n    \n    console.log(`Custom event completed. Processed ${npcs.length} NPCs in single API call`);\n\n    setNpcs(updatedNpcsFromCustomEvent);\n    setCustomEvent('');\n    \n    // End loading animation\n    setIsProcessingEvent(false);\n    \n    // Trigger flash animation for new data\n    setFlashAnimation(true);\n    setTimeout(() => setFlashAnimation(false), 1000);\n  };\n\n  const formatNPCDisplay = (npc) => {\n    const traits = npc.traits;\n    const relationships = npc.relationships || [];\n    const relationshipText = relationships\n      .map(rel => `ðŸ‘¨â€ðŸ‘¦ ${rel.npc_id} ${rel.relationship_type} Str${rel.strength}`)\n      .join(' ') || '';\n    \n    const genderIcon = npc.gender === 'male' ? 'ðŸ‘¨M' : 'ðŸ‘©F';\n    const houseShort = npc.house.replace('House ', '');\n    \n    // Find previous data for this NPC\n    const previousNpc = previousNpcs.find(prevNpc => prevNpc.id === npc.id);\n    \n    const formatTooltipData = (npcData) => {\n      if (!npcData) return 'No previous data available';\n      const prevTraits = npcData.traits;\n      return `Previous State:\\nHonor: ${prevTraits.honor} Loyal: ${prevTraits.loyalty} IQ: ${prevTraits.intelligence} EQ: ${prevTraits.emotional_intelligence}\\nEvil: ${prevTraits.evil} Selfless: ${prevTraits.selflessness} Ambition: ${prevTraits.ambition}\\nCombat: ${prevTraits.combat_skill} Political: ${prevTraits.political_cunning} Religion: ${prevTraits.religious_devotion}\\nLocation: ${npcData.location || 'Unknown'} Status: ${npcData.status}\\nBehavior: ${npcData.current_action || npcData.current_behavior || 'Idle'}`;\n    };\n    \n    return (\n      <div \n        key={npc.id} \n        className=\"npc-card-two-line\" \n        title={formatTooltipData(previousNpc)}\n      >\n        <div className=\"npc-line-1\">\n          id: {npc.id} name: {npc.name} ðŸ  {houseShort} ðŸ”ž{npc.age} {genderIcon} ðŸ’¼ {npc.role} | Honor: {traits.honor} Loyal: {traits.loyalty} IQ: {traits.intelligence} EQ: {traits.emotional_intelligence} Evil: {traits.evil} Selfless: {traits.selflessness} Ambition: {traits.ambition} Combat: {traits.combat_skill} Political: {traits.political_cunning} Religion: {traits.religious_devotion} {relationshipText}\n        </div>\n        <div className=\"npc-line-2\">\n          ðŸŒ {npc.location || 'Unknown'} ðŸŸ¢ {npc.status} Current_Behavior: {npc.current_action || npc.current_behavior || 'Idle'}\n        </div>\n      </div>\n    );\n  };\n\n  const getGroupedStats = () => {\n    const houseStats = {};\n    const genderStats = {};\n    const locationStats = {};\n    \n    npcs.forEach(npc => {\n      const house = npc.house.replace('House ', '');\n      houseStats[house] = (houseStats[house] || 0) + 1;\n      genderStats[npc.gender] = (genderStats[npc.gender] || 0) + 1;\n      const location = npc.location || 'Unknown';\n      locationStats[location] = (locationStats[location] || 0) + 1;\n    });\n    \n    return { houseStats, genderStats, locationStats };\n  };\n\n  const { houseStats, genderStats, locationStats } = getGroupedStats();\n\n  return (\n    <div className=\"app\">\n      <header className=\"app-header\">\n        <h1>Live NPC Engine</h1>\n        <div className=\"header-buttons\">\n          <button onClick={loadWorldQuest} className=\"load-btn\">\n            ðŸ“œ Load World Quest\n          </button>\n          <button onClick={loadPersona} className=\"load-btn\">\n            ðŸ‘¥ Load Persona\n          </button>\n          <button onClick={restartWorld} className=\"restart-btn\">\n            ðŸ”„ Restart World\n          </button>\n          <button onClick={() => setShowConfig(true)} className=\"config-btn\">\n            âš™ï¸ AI Engine Config\n          </button>\n        </div>\n      </header>\n\n      {showConfig && (\n        <div className=\"config-modal\">\n          <div className=\"config-content\">\n            <h3>AI Engine Configuration</h3>\n            <div className=\"config-form\">\n              <div className=\"config-field\">\n                <label>Cerebras API Key:</label>\n                <input\n                  type=\"password\"\n                  value={apiConfig.apiKey}\n                  onChange={(e) => setApiConfig({...apiConfig, apiKey: e.target.value})}\n                  placeholder=\"Enter your Cerebras API key\"\n                  className=\"config-input\"\n                />\n              </div>\n              <div className=\"config-field\">\n                <label>API URL:</label>\n                <input\n                  type=\"text\"\n                  value={apiConfig.apiUrl}\n                  onChange={(e) => setApiConfig({...apiConfig, apiUrl: e.target.value})}\n                  className=\"config-input\"\n                />\n              </div>\n              <div className=\"config-field\">\n                <label>Model Name:</label>\n                <select\n                  value={apiConfig.modelName}\n                  onChange={(e) => setApiConfig({...apiConfig, modelName: e.target.value})}\n                  className=\"config-select\"\n                >\n                  <option value=\"qwen-3-coder-480b\">Qwen 3 Coder 480B (Default)</option>\n                  <option value=\"qwen-3-235b-a22b-instruct-2507\">Qwen 3 235B A22B Instruct 2507</option>\n                  <option value=\"qwen-3-235b-a22b-thinking-2507\">Qwen 3 235B A22B Thinking 2507</option>\n                  <option value=\"llama-3.3-70b\">Llama 3.3 70B</option>\n                  <option value=\"qwen-3-32b\">Qwen 3 32B</option>\n                  <option value=\"deepseek-r1-distill-llama-70b\">DeepSeek R1 Distill Llama 70B</option>\n                </select>\n              </div>\n              <div className=\"config-status\">\n                {apiConfig.apiKey ? (\n                  <span className=\"status-connected\">ðŸŸ¢ API Key Configured</span>\n                ) : (\n                  <span className=\"status-disconnected\">ðŸ”´ API Key Required</span>\n                )}\n              </div>\n            </div>\n            <div className=\"config-buttons\">\n              <button onClick={() => setShowConfig(false)} className=\"config-save-btn\">\n                Save & Close\n              </button>\n              <button onClick={() => setShowConfig(false)} className=\"config-cancel-btn\">\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"main-content\">\n        <div className=\"left-panel\">\n          <h2>NPCs ({npcs.length})</h2>\n          \n          <div className=\"stats-display\">\n            <div className=\"stat-group\">\n              <strong>Houses:</strong> {Object.entries(houseStats).map(([house, count]) => `${house}(${count})`).join(', ')}\n            </div>\n            <div className=\"stat-group\">\n              <strong>Gender:</strong> {Object.entries(genderStats).map(([gender, count]) => `${gender}(${count})`).join(', ')}\n            </div>\n            <div className=\"stat-group\">\n              <strong>Locations:</strong> {Object.entries(locationStats).map(([location, count]) => `${location}(${count})`).join(', ')}\n            </div>\n            <div className=\"stat-group rate-limit-status\">\n              <strong>API Usage:</strong> \n              <span className={rateLimitError ? 'rate-limit-error' : apiCallCount >= 7 ? 'rate-limit-warning' : 'rate-limit-ok'}>\n                {apiCallCount}/10 calls this minute\n              </span>\n              {rateLimitError && (\n                <span className=\"rate-limit-message\"> âš ï¸ Rate limit reached - using simulation mode</span>\n              )}\n            </div>\n          </div>\n          \n          <div className={`npc-list ${flashAnimation ? 'flash-animation' : ''}`}>\n            {npcs.map(npc => formatNPCDisplay(npc))}\n          </div>\n        </div>\n\n        <div className=\"right-panel\">\n          <div className=\"world-events-section\">\n            <h3>World Events</h3>\n            \n            <div className=\"event-controls\">\n              <div className=\"timer-controls\">\n                <label>\n                  Auto Timer: \n                  <input \n                    type=\"number\" \n                    value={timerInterval} \n                    onChange={(e) => setTimerInterval(parseInt(e.target.value))}\n                    min=\"5\"\n                    max=\"300\"\n                  /> sec\n                </label>\n              </div>\n              \n              <div className=\"control-buttons\">\n                <button onClick={() => {\n                  if (currentEventIndex === 0) {\n                    processNextEvent();\n                  }\n                }} className=\"manual-start-btn\">\n                  ðŸš€ Manual Start Event\n                </button>\n                \n                {!isAutoRunning ? (\n                  <button onClick={startAutoRun} className=\"start-btn\">\n                    â–¶ï¸ Auto Events\n                  </button>\n                ) : (\n                  <button onClick={stopAutoRun} className=\"stop-btn\">\n                    â¸ï¸ Pause Auto\n                  </button>\n                )}\n                \n                <button onClick={processNextEvent} className=\"next-btn\">\n                  â­ï¸ Next Event\n                </button>\n              </div>\n              \n              <div className=\"custom-event\">\n                <input \n                  type=\"text\" \n                  placeholder=\"Custom event...\"\n                  value={customEvent}\n                  onChange={(e) => setCustomEvent(e.target.value)}\n                  className=\"custom-event-input\"\n                />\n                <button onClick={sendCustomEvent} className=\"send-btn\">\n                  ðŸ“¤ Send\n                </button>\n              </div>\n            </div>\n            \n            <div className=\"events-stack\" style={{ position: 'relative' }}>\n              {isProcessingEvent && (\n                <div className=\"loading-overlay\">\n                  <div className=\"loading-spinner\"></div>\n                  <div className=\"loading-text\">Executing World Event...</div>\n                </div>\n              )}\n              {worldEvents.map((event, index) => {\n                let statusClass = 'event-pending';\n                if (index < currentEventIndex) {\n                  statusClass = 'event-completed';\n                } else if (index === currentEventIndex) {\n                  statusClass = 'event-running';\n                }\n                \n                return (\n                  <div key={event.event_id} className={`event-card-stack ${statusClass}`}>\n                    <div className=\"event-header\">\n                      <span className=\"event-number\">#{event.event_id}</span>\n                      <span className=\"event-status-indicator\">\n                        {index < currentEventIndex ? 'âœ…' : index === currentEventIndex ? 'ðŸ”„' : 'â³'}\n                      </span>\n                    </div>\n                    <div className=\"event-title\">{event.title}</div>\n                    <div className=\"event-description\">{event.description}</div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}