{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\win10\\\\Documents\\\\GitHub\\\\AliveNPC-Engine\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport './App.css';\n\n// Components\nimport { Header, NPCList, WorldEvents, ConfigModal, LoadingOverlay } from './components';\n\n// Hooks\nimport { useNPCData, useWorldEvents, useAPIConfig, useRateLimit, useAutoRun } from './hooks';\n\n// Services\nimport { aiService, npcService, dataService } from './services';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  // Custom hooks for state management\n  const {\n    npcs,\n    previousNpcs,\n    flashAnimation,\n    loadSampleData,\n    loadPersonaData,\n    loadDefaultData,\n    updateNPCs\n  } = useNPCData();\n  const {\n    worldEvents,\n    currentEventIndex,\n    customEvent,\n    setCustomEvent,\n    loadSampleEvents,\n    loadWorldQuests,\n    loadDefaultEvents,\n    restartWorld,\n    processNextEvent: baseProcessNextEvent,\n    sendCustomEvent\n  } = useWorldEvents();\n  const {\n    apiConfig,\n    updateConfig,\n    isConfigured\n  } = useAPIConfig();\n  const rateLimit = useRateLimit();\n  const [showConfigModal, setShowConfigModal] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [loadingMessage, setLoadingMessage] = React.useState('');\n\n  // Enhanced process next event with AI integration\n  const processNextEvent = async () => {\n    if (worldEvents.length === 0) return;\n    const event = worldEvents[currentEventIndex];\n    setIsLoading(true);\n    setLoadingMessage(`Processing: ${event.title}`);\n    try {\n      const updatedNpcs = await aiService.updateAllNPCsWithAI(npcs, event, apiConfig);\n      updateNPCs(updatedNpcs);\n      baseProcessNextEvent();\n    } catch (error) {\n      console.error('Error processing event:', error);\n    } finally {\n      setIsLoading(false);\n      setLoadingMessage('');\n    }\n  };\n\n  // Enhanced custom event handler\n  const handleCustomEvent = async () => {\n    if (!customEvent.trim()) return;\n    const event = {\n      title: \"Custom Event\",\n      description: customEvent,\n      impact_level: \"Custom\"\n    };\n    setIsLoading(true);\n    setLoadingMessage('Processing custom event...');\n    try {\n      const updatedNpcs = await aiService.updateAllNPCsWithAI(npcs, event, apiConfig);\n      updateNPCs(updatedNpcs);\n      sendCustomEvent(event);\n    } catch (error) {\n      console.error('Error processing custom event:', error);\n    } finally {\n      setIsLoading(false);\n      setLoadingMessage('');\n    }\n  };\n\n  // Auto-run functionality\n  const autoRun = useAutoRun(processNextEvent);\n\n  // Cleanup auto-run on unmount\n  useEffect(() => {\n    return () => autoRun.cleanup();\n  }, [autoRun]);\n\n  // Load environment variables on component mount\n  useEffect(() => {\n    const envApiKey = process.env.REACT_APP_CEREBRAS_API_KEY;\n    const envApiUrl = process.env.REACT_APP_CEREBRAS_API_URL;\n    const envModelName = process.env.REACT_APP_MODEL_NAME;\n    if (envApiKey || envApiUrl || envModelName) {\n      updateConfig({\n        apiKey: envApiKey || '',\n        apiUrl: envApiUrl || 'https://api.cerebras.ai/v1/chat/completions',\n        modelName: envModelName || 'qwen-3-coder-480b'\n      });\n    }\n  }, [updateConfig]);\n\n  // Load default data on component mount\n  useEffect(() => {\n    loadDefaultData();\n  }, [loadDefaultData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      onLoadWorldQuest: loadWorldQuests,\n      onLoadPersona: loadPersonaData,\n      onRestartWorld: restartWorld,\n      onShowConfig: () => setShowConfigModal(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(NPCList, {\n        npcs: npcs,\n        previousNpcs: previousNpcs,\n        flashAnimation: flashAnimation,\n        rateLimit: rateLimit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(WorldEvents, {\n        worldEvents: worldEvents,\n        currentEventIndex: currentEventIndex,\n        customEvent: customEvent,\n        setCustomEvent: setCustomEvent,\n        onProcessNext: processNextEvent,\n        onSendCustom: handleCustomEvent,\n        autoRun: autoRun\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), showConfigModal && /*#__PURE__*/_jsxDEV(ConfigModal, {\n      apiConfig: apiConfig,\n      onUpdateConfig: updateConfig,\n      onClose: () => setShowConfigModal(false),\n      isConfigured: isConfigured()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(LoadingOverlay, {\n      message: loadingMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"e5d9DSnmvzIzoT5SWyDeU8HLNFU=\", false, function () {\n  return [useNPCData, useWorldEvents, useAPIConfig, useRateLimit, useAutoRun];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","Header","NPCList","WorldEvents","ConfigModal","LoadingOverlay","useNPCData","useWorldEvents","useAPIConfig","useRateLimit","useAutoRun","aiService","npcService","dataService","jsxDEV","_jsxDEV","App","_s","npcs","previousNpcs","flashAnimation","loadSampleData","loadPersonaData","loadDefaultData","updateNPCs","worldEvents","currentEventIndex","customEvent","setCustomEvent","loadSampleEvents","loadWorldQuests","loadDefaultEvents","restartWorld","processNextEvent","baseProcessNextEvent","sendCustomEvent","apiConfig","updateConfig","isConfigured","rateLimit","showConfigModal","setShowConfigModal","useState","isLoading","setIsLoading","loadingMessage","setLoadingMessage","length","event","title","updatedNpcs","updateAllNPCsWithAI","error","console","handleCustomEvent","trim","description","impact_level","autoRun","cleanup","envApiKey","process","env","REACT_APP_CEREBRAS_API_KEY","envApiUrl","REACT_APP_CEREBRAS_API_URL","envModelName","REACT_APP_MODEL_NAME","apiKey","apiUrl","modelName","className","children","onLoadWorldQuest","onLoadPersona","onRestartWorld","onShowConfig","fileName","_jsxFileName","lineNumber","columnNumber","onProcessNext","onSendCustom","onUpdateConfig","onClose","message","_c","$RefreshReg$"],"sources":["C:/Users/win10/Documents/GitHub/AliveNPC-Engine/src/App.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport './App.css';\n\n// Components\nimport { \n  Header, \n  NPCList, \n  WorldEvents, \n  ConfigModal, \n  LoadingOverlay \n} from './components';\n\n// Hooks\nimport { \n  useNPCData, \n  useWorldEvents, \n  useAPIConfig, \n  useRateLimit, \n  useAutoRun \n} from './hooks';\n\n// Services\nimport { aiService, npcService, dataService } from './services';\n\nconst App = () => {\n  // Custom hooks for state management\n  const { \n    npcs, \n    previousNpcs, \n    flashAnimation, \n    loadSampleData, \n    loadPersonaData, \n    loadDefaultData, \n    updateNPCs \n  } = useNPCData();\n  \n  const { \n    worldEvents, \n    currentEventIndex, \n    customEvent, \n    setCustomEvent,\n    loadSampleEvents, \n    loadWorldQuests, \n    loadDefaultEvents, \n    restartWorld, \n    processNextEvent: baseProcessNextEvent, \n    sendCustomEvent \n  } = useWorldEvents();\n  \n  const { apiConfig, updateConfig, isConfigured } = useAPIConfig();\n  const rateLimit = useRateLimit();\n  const [showConfigModal, setShowConfigModal] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [loadingMessage, setLoadingMessage] = React.useState('');\n\n  // Enhanced process next event with AI integration\n  const processNextEvent = async () => {\n    if (worldEvents.length === 0) return;\n    \n    const event = worldEvents[currentEventIndex];\n    setIsLoading(true);\n    setLoadingMessage(`Processing: ${event.title}`);\n    \n    try {\n      const updatedNpcs = await aiService.updateAllNPCsWithAI(npcs, event, apiConfig);\n      updateNPCs(updatedNpcs);\n      baseProcessNextEvent();\n    } catch (error) {\n      console.error('Error processing event:', error);\n    } finally {\n      setIsLoading(false);\n      setLoadingMessage('');\n    }\n  };\n  \n  // Enhanced custom event handler\n  const handleCustomEvent = async () => {\n    if (!customEvent.trim()) return;\n    \n    const event = {\n      title: \"Custom Event\",\n      description: customEvent,\n      impact_level: \"Custom\"\n    };\n    \n    setIsLoading(true);\n    setLoadingMessage('Processing custom event...');\n    \n    try {\n      const updatedNpcs = await aiService.updateAllNPCsWithAI(npcs, event, apiConfig);\n      updateNPCs(updatedNpcs);\n      sendCustomEvent(event);\n    } catch (error) {\n      console.error('Error processing custom event:', error);\n    } finally {\n      setIsLoading(false);\n      setLoadingMessage('');\n    }\n  };\n\n  // Auto-run functionality\n  const autoRun = useAutoRun(processNextEvent);\n  \n  // Cleanup auto-run on unmount\n  useEffect(() => {\n    return () => autoRun.cleanup();\n  }, [autoRun]);\n\n  // Load environment variables on component mount\n  useEffect(() => {\n    const envApiKey = process.env.REACT_APP_CEREBRAS_API_KEY;\n    const envApiUrl = process.env.REACT_APP_CEREBRAS_API_URL;\n    const envModelName = process.env.REACT_APP_MODEL_NAME;\n    \n    if (envApiKey || envApiUrl || envModelName) {\n      updateConfig({\n        apiKey: envApiKey || '',\n        apiUrl: envApiUrl || 'https://api.cerebras.ai/v1/chat/completions',\n        modelName: envModelName || 'qwen-3-coder-480b'\n      });\n    }\n  }, [updateConfig]);\n\n  // Load default data on component mount\n  useEffect(() => {\n    loadDefaultData();\n  }, [loadDefaultData]);\n\n  return (\n    <div className=\"App\">\n      <Header \n        onLoadWorldQuest={loadWorldQuests}\n        onLoadPersona={loadPersonaData}\n        onRestartWorld={restartWorld}\n        onShowConfig={() => setShowConfigModal(true)}\n      />\n      \n      <div className=\"main-content\">\n        <NPCList \n          npcs={npcs}\n          previousNpcs={previousNpcs}\n          flashAnimation={flashAnimation}\n          rateLimit={rateLimit}\n        />\n        \n        <WorldEvents \n          worldEvents={worldEvents}\n          currentEventIndex={currentEventIndex}\n          customEvent={customEvent}\n          setCustomEvent={setCustomEvent}\n          onProcessNext={processNextEvent}\n          onSendCustom={handleCustomEvent}\n          autoRun={autoRun}\n        />\n      </div>\n      \n      {showConfigModal && (\n        <ConfigModal \n          apiConfig={apiConfig}\n          onUpdateConfig={updateConfig}\n          onClose={() => setShowConfigModal(false)}\n          isConfigured={isConfigured()}\n        />\n      )}\n      \n      {isLoading && (\n        <LoadingOverlay message={loadingMessage} />\n      )}\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}